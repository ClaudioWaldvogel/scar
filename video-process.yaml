functions:
  aws:
  - lambda:
      name: scar-batch-ffmpeg-split
      image: grycap/ffmpeg
      init_script: split-video.sh
      execution_mode: batch
      log_level: debug
      input:
      - storage: s3
        path: scar-ffmpeg
      output:
      - storage: s3
        path: scar-ffmpeg/scar-batch-ffmpeg-split/video-output
  - lambda:          
      name: scar-lambda-darknet
      image: grycap/darknet
      memory: 3008
      log_level: debug
      init_script: yolo-sample-object-detection.sh
      input:
      - storage: s3
        path: scar-ffmpeg/scar-batch-ffmpeg-split/video-output
      output:
      - storage: s3
        path: scar-ffmpeg/scar-batch-ffmpeg-split/image-output

storages:
  minio:
    access_key: muser
    secret_key: mpass
